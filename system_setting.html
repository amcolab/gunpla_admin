<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>システム設定 - Kintone</title>

    <!-- Kintone Common Stylesheet -->
    <link rel="stylesheet" href="kintone-common-v2.css">
</head>

<body>
    <!-- Kintone Header -->
    <div class="kintone-header">
        <div class="app-icon-circle">⚙️</div>
        <div class="app-title-header">システム設定</div>
    </div>

    <!-- Secondary Navigation -->
    <div class="secondary-nav">
        <div class="nav-icon">🏠</div>
        <span class="breadcrumb-text">アプリ: システム設定</span>
        <div class="nav-right">
            <div class="nav-icon">⚙️</div>
            <div class="nav-icon">❓</div>
        </div>
    </div>

    <!-- App Description -->
    <div class="app-description">
        Credie 全体の業務ロジック・通知設定・会社情報・銀行口座など、システムの動作に関わる重要な設定を管理します。
    </div>

    <!-- View Controls -->
    <div class="view-controls">
        <button class="view-button">
            <span class="view-icon">⚙️</span>
            <span class="view-text">システム設定一覧</span>
            <span class="dropdown-arrow">▼</span>
        </button>

        <button class="control-btn">
            <span class="control-btn-icon">🔍</span>
        </button>

        <div class="controls-right">
            <button class="icon-only-btn">⋯</button>
        </div>
    </div>

    <!-- Record Count Top -->
    <div class="record-count" id="topCount">1 - 5（5件中）</div>

    <!-- Data Table -->
    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>設定カテゴリ</th>
                    <th>説明</th>
                    <th>最終更新</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody id="settingsTableBody">
                <!-- Data will be rendered here -->
            </tbody>
        </table>
    </div>

    <!-- Record Count Bottom -->
    <div class="bottom-count" id="bottomCount">1 - 5（5件中）</div>
    <script src="auth.js"></script>
    <script>
        // Settings data
        const settings = [
            {
                id: '00001',
                category: '会社情報',
                description: '会社名・住所・連絡先などの基本情報',
                lastUpdated: '2025/01/01'
            },
            {
                id: '00002',
                category: '銀行口座情報',
                description: 'Credieの振込先情報（AP支払用）',
                lastUpdated: '2025/01/03'
            },
            {
                id: '00003',
                category: '通知テンプレート',
                description: 'メール / SMS / LINE の通知文面',
                lastUpdated: '2025/01/05'
            },
            {
                id: '00004',
                category: '業務ルール',
                description: '配当計算日、最低金額など',
                lastUpdated: '2025/01/07'
            },
            {
                id: '00005',
                category: 'メール送信設定',
                description: 'SMTPサーバー設定・送信元メールアドレス',
                lastUpdated: '2025/01/10'
            }
        ];

        // Render table
        function renderTable() {
            const tbody = document.getElementById('settingsTableBody');

            tbody.innerHTML = settings.map(setting => {
                return `
                    <tr>
                        <td>
                            <a href="#" class="record-link" onclick="viewSetting('${setting.id}'); return false;">
                                ${setting.category}
                            </a>
                        </td>
                        <td>${setting.description}</td>
                        <td>${setting.lastUpdated}</td>
                        <td>
                            <div class="row-actions">
                                <button class="action-icon edit" 
                                        title="編集" 
                                        onclick="editSetting('${setting.id}')">
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');

            updateRecordCount();
        }

        // Update record count
        function updateRecordCount() {
            const count = settings.length;
            const countText = `1 - ${count}（${count}件中）`;
            document.getElementById('topCount').textContent = countText;
            document.getElementById('bottomCount').textContent = countText;
        }

        // View setting
        function viewSetting(id) {
            const setting = settings.find(s => s.id === id);
            if (setting) {
                alert(`設定詳細:\n\n` +
                    `カテゴリ: ${setting.category}\n` +
                    `説明: ${setting.description}\n` +
                    `最終更新: ${setting.lastUpdated}\n\n` +
                    `※ 設定詳細画面を開きます`);
            }
        }

        // Edit setting
        function editSetting(id) {
            const setting = settings.find(s => s.id === id);
            if (setting) {
                alert(`設定を編集:\n\n` +
                    `カテゴリ: ${setting.category}\n\n` +
                    `※ 編集画面を開きます`);
            }
        }

        // Initial render
        renderTable();

        // Log info
        console.log('システム設定 - ロード完了');
        console.log(`設定項目数: ${settings.length}件`);
    </script>
</body>

</html>