<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />販売チャネルマスタ (Store Channel Master）</title>
  <link rel="stylesheet" href="kintone-common-v2.css" />
  <style>
    body {
      margin: 0;
      padding: 24px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background-color: #f5f5f7;
      line-height: 1.7;
    }

    .spec-container {
      max-width: 980px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 8px;
      padding: 24px 32px;
      box-shadow: 0 0 0 1px rgba(0,0,0,0.04), 0 12px 30px rgba(0,0,0,0.06);
    }

    h1, h2, h3, h4 {
      margin-top: 1.4em;
      margin-bottom: 0.6em;
      color: #222;
    }

    h1 {
      font-size: 22px;
      border-bottom: 2px solid #e5e5ea;
      padding-bottom: 8px;
    }

    h2 {
      font-size: 18px;
    }

    h3 {
      font-size: 16px;
    }

    p {
      margin: 0.4em 0;
    }

    ul {
      margin: 0.4em 0 0.8em 1.4em;
    }

    ol {
      margin: 0.4em 0 0.8em 1.6em;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin: 0.5em 0 1.2em;
      font-size: 13px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 6px 8px;
      vertical-align: top;
    }

    th {
      background-color: #f2f2f7;
      font-weight: 600;
      white-space: nowrap;
    }

    .spec-meta {
      font-size: 12px;
      color: #666;
      margin-bottom: 12px;
    }

    .spec-tag {
      display: inline-block;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #eef2ff;
      color: #3949ab;
      margin-right: 6px;
    }

    .spec-callout {
      border-left: 4px solid #3f51b5;
      background: #f5f7ff;
      padding: 8px 12px;
      margin: 10px 0 16px;
      font-size: 13px;
    }

    .spec-screenshot {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 8px;
      background: #fafafa;
      text-align: center;
      margin: 8px 0 16px;
    }

    .spec-screenshot img {
      max-width: 100%;
      height: auto;
      border-radius: 4px;
      border: 1px solid #e0e0e0;
    }

    .spec-screenshot-caption {
      font-size: 12px;
      color: #666;
      margin-top: 6px;
    }

    @media print {
      body {
        background: #ffffff;
        padding: 0;
      }
      .spec-container {
        box-shadow: none;
        border-radius: 0;
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="spec-container">

    <div class="spec-meta">
      <span class="spec-tag">UI Spec</span>
      <span class="spec-tag">Channel Master</span>
      Version 1.0 / 作成日: ________
    </div>

    <h1>UI Screen Specification – 販売チャネルマスタ (Store Channel Master）</h1>
    <p><strong>対象画面:</strong> 販売チャネル一覧 / 店舗（チャネル）詳細</p>
    <p><strong>想定利用者:</strong> EC担当、ロジスティクス担当、マーケティング担当（Credie 内部ユーザー）</p>

    <!-- 1. 目的 -->
    <h2>1. 画面の目的（Purpose）</h2>
    <p>
      販売チャネルマスタ画面は、EC 販売チャネル（Shopify, Amazon, Rakuten, Yahoo, BASE）、
      B2B エージェンシーポータル、卸売チャネルなど、すべての販売チャネルを一元管理するためのマスタです。
    </p>
    <ul>
      <li>各チャネルの「種別」「接続URL / ドメイン」「API バージョン」「手数料率」「通貨」「連携ステータス」を統一管理する。</li>
      <li>Orders App での注文元判定（どのチャネルからの注文か）の基盤情報となる。</li>
      <li>売上分析・チャネル別利益分析のキー（チャネル種別・店舗名）として利用する。</li>
    </ul>

    <!-- 2. ユーザーストーリー -->
    <h2>2. ユーザーストーリー（User Stories）</h2>

    <h3>2.1 EC担当</h3>
    <ul>
      <li>新しく Shopify ストアや Amazon 出店を追加した際、店舗管理マスタで新規チャネルレコードを作成する。</li>
      <li>チャネルごとの手数料率（プラットフォーム手数料やマーケットプレイス利用料）を登録しておき、月次の粗利計算に利用する。</li>
      <li>API 仕様変更があった場合、「API バージョン」フィールドを更新して連携の整合性を把握する。</li>
    </ul>

    <h3>2.2 ロジスティクス / 運用担当</h3>
    <ul>
      <li>どのチャネルがどの倉庫（Store App）から出荷されるかを設定する（将来的に紐づけフィールド追加を想定）。</li>
      <li>連携ステータスが「無効」のチャネルは新規注文取込対象から外す運用を行う。</li>
    </ul>

    <h3>2.3 マーケティング / 経営管理</h3>
    <ul>
      <li>チャネル種別（Shopify / Amazon / B2B / 卸売 など）ごとの売上・手数料コストを分析するための基礎マスタとして利用。</li>
    </ul>

    <!-- 3. 機能 -->
    <h2>3. 機能概要（Functions）</h2>
    <ul>
      <li>チャネル（店舗）レコードの一覧表示・検索・フィルタ・ソート</li>
      <li>新規チャネル登録・既存チャネルの編集</li>
      <li>連携ステータス（有効 / 無効）の管理および一覧での表示バッジ</li>
      <li>CSV エクスポートによるチャネルマスタの外部出力</li>
      <li>将来的に Store App（倉庫マスタ）との紐づけフィールドを追加できる構成</li>
    </ul>

    <!-- 4. レイアウト -->
    <h2>4. 画面レイアウト（Layout）</h2>

    <h3>4.1 一覧画面 – 店舗管理</h3>

    <div class="spec-callout">
      店舗管理一覧画面では、各販売チャネル（Shopify 本店、Amazon JP、Rakuten Official、B2B ポータル、卸売チャネルなど）を行単位で表示します。<br>
      上部のビュー切替・検索・絞り込みは標準 Kintone コンポーネントを使用します。
    </div>

    <table>
      <tr><th>項目名</th><th>説明</th></tr>
      <tr>
        <td>店舗名</td>
        <td>
          チャネルを識別しやすい名称。<br>
          例: <code>Shopify Official</code>, <code>Amazon JP</code>, <code>Rakuten Official</code>, <code>B2B Agency Portal</code> など。<br>
          クリックで店舗（チャネル）詳細画面へ遷移。
        </td>
      </tr>
      <tr>
        <td>チャネル種別</td>
        <td>
          チャネルのカテゴリ。<br>
          例: Shopify / Amazon / Rakuten / Yahoo / BASE / B2B / 卸売 など。<br>
          一覧では色付きバッジで表示し、視認性を高める。
        </td>
      </tr>
      <tr>
        <td>ECサイトURL / ドメイン</td>
        <td>
          対象チャネルの EC サイトURL またはドメイン。<br>
          例: <code>credie-store.myshopify.com</code>, <code>rakuten.co.jp/credie-store</code>, <code>agency.credie.jp</code>。<br>
          ブラウザでの動作確認やリンク共有に使用。
        </td>
      </tr>
      <tr>
        <td>連携ステータス</td>
        <td>
          現在のシステム連携状態。<br>
          有効 / 無効。<br>
          有効: API 連携や注文取込を実施中。<br>
          無効: 一時停止・撤退したチャネル。赤色バッジで表示。
        </td>
      </tr>
      <tr>
        <td>手数料率</td>
        <td>
          販売金額に対するチャネル手数料の割合（%）。<br>
          例: 3.5%, 8.0%, 6.5%, 0.0% など。<br>
          月次粗利計算時に利用することを想定。
        </td>
      </tr>
      <tr>
        <td>通貨</td>
        <td>
          そのチャネルでの売上通貨。Phase 1 では JPY 固定。<br>
          将来的に多通貨対応を行う場合の拡張を想定。
        </td>
      </tr>
      <tr>
        <td>API バージョン</td>
        <td>
          連携に使用している API のバージョン情報。<br>
          例: <code>2025-07</code>（Shopify API バージョン）, <code>SP-API v0</code>, <code>RMS API v1</code>, <code>v2.1</code>, <code>-</code>（API 連携なし）。<br>
          API 更新時の影響範囲確認や技術的なトラブルシュートに利用。
        </td>
      </tr>
      <tr>
        <td>操作</td>
        <td>
          編集アイコン（鉛筆）など、Kintone 標準のレコード操作。<br>
          詳細表示・編集・削除は基本的にこの操作から行う。
        </td>
      </tr>
    </table>

    <h4>4.1.1 一覧画面のツールバー</h4>
    <ul>
      <li><strong>ビュー切替:</strong> 「全ての店舗」「有効のみ」など、ステータス別・種別別のビューを用意予定。</li>
      <li><strong>検索ボックス:</strong> 店舗名・チャネル種別・URL などを対象としたフリーテキスト検索。</li>
      <li><strong>＋ボタン:</strong> 新規チャネル（店舗）レコードを作成。</li>
      <li><strong>その他設定アイコン:</strong> 標準の表示設定、一覧カスタマイズ用ボタン。</li>
    </ul>

    <h4>4.1.2 スクリーンショット</h4>
    <div class="spec-screenshot">
      <img src="store_channel_screen.png" alt="店舗管理 / チャネルマスタ一覧画面" />
      <div class="spec-screenshot-caption">図1. 店舗管理 / チャネルマスタ一覧画面（Store Channel List）</div>
    </div>

    <h3>4.2 店舗（チャネル）詳細画面（想定フィールド）</h3>
    <p>
      詳細画面では、一覧に表示している項目に加え、API 接続設定やメモなどの補足情報を管理できるようにします。
      Phase 1 では以下のフィールド構成を想定しています。
    </p>
    <table>
      <tr><th>項目名</th><th>説明</th></tr>
      <tr><td>店舗ID</td><td>内部管理用の一意 ID（自動採番またはコード）。他システム連携で使用。</td></tr>
      <tr><td>店舗名</td><td>チャネルの表示名。</td></tr>
      <tr><td>チャネル種別</td><td>Shopify / Amazon / Rakuten / Yahoo / BASE / B2B / 卸売 など。</td></tr>
      <tr><td>ECサイトURL / ドメイン</td><td>フル URL またはドメイン。</td></tr>
      <tr><td>連携ステータス</td><td>有効 / 無効。新規チャネル追加時のデフォルトは「有効」。</td></tr>
      <tr><td>手数料率</td><td>% 表記。小数点第一位までを想定。</td></tr>
      <tr><td>通貨</td><td>Phase 1: JPY 固定。プルダウンで選択可能な設計にしておく。</td></tr>
      <tr><td>API バージョン</td><td>接続中の API バージョン文字列。</td></tr>
      <tr><td>API 連携メモ</td><td>Webhook URL、認証方式、制限事項などのメモ（内部用）。</td></tr>
      <tr><td>備考</td><td>キャンペーン専用チャネルなど、運用上の注意点を記載。</td></tr>
    </table>

    <!-- 5. 確認事項 -->
    <h2>5. お客様に確認したい点（Questions）</h2>
    <ul>
      <li>チャネル種別の分類（Shopify / Amazon / Rakuten / Yahoo / BASE / B2B / 卸売）に過不足はありませんか？</li>
      <li>手数料率は「プラットフォーム手数料のみ」か、それとも決済手数料も含めた総手数料として管理したいですか？</li>
      <li>API 連携のないチャネル（完全オフラインの卸売など）もこのマスタで管理する想定で問題ないでしょうか？</li>
      <li>将来的に「紐づく倉庫（Store App）」や「ブランド」などの項目を追加する必要がありますか？</li>
    </ul>

    <!-- 6. ビジネス影響 -->
    <h2>6. ビジネス影響（Business Impact）</h2>
    <ul>
      <li>チャネル情報を一元管理することで、システム連携状況や手数料条件の把握が容易になり、運用ミスを削減できる。</li>
      <li>Orders App やレポート機能でチャネル別売上・粗利を分析しやすくなる。</li>
      <li>API バージョンを明示的に管理することで、仕様変更時の影響範囲を素早く把握できる。</li>
    </ul>

    <!-- 7. Scope / Out of Scope -->
    <h2>7. Scope / Out of Scope</h2>

    <h3>7.1 Scope</h3>
    <ul>
      <li>販売チャネル（店舗）のマスタ管理（CRUD）</li>
      <li>手数料率・API バージョン・連携ステータスの保持</li>
      <li>Orders App・レポートから参照されるチャネル一覧の提供</li>
    </ul>

    <h3>7.2 Out of Scope</h3>
    <ul>
      <li>API キー・シークレットなど機密情報の保管（別途 Secret 管理を想定）</li>
      <li>チャネル別キャンペーンや広告運用の詳細設定</li>
      <li>チャネルごとの在庫配分・自動引当ロジック（将来の拡張対象）</li>
    </ul>

    <!-- 8. 開発メモ -->
    <h2>8. 開発メモ（Dev Notes）</h2>
    <ul>
      <li>チャネル種別はマスタ値（ドロップダウン）として管理し、レポートや連携ロジックで利用しやすいようにする。</li>
      <li>連携ステータスが「無効」のチャネルは、Orders App での新規チャネル選択肢から除外する運用を想定。</li>
      <li>API バージョンの形式は自由文字列だが、可能であれば「ベンダー推奨の表記」をガイドとしておく。</li>
      <li>多通貨・複数国展開を見据え、通貨フィールドは将来拡張可能な実装にする。</li>
      <li>他のマスタ（Product / Store / Partner）と同じ CSS（kintone-common-v2.css）およびレイアウトガイドラインに従う。</li>
    </ul>

  </div>
</body>
</html>